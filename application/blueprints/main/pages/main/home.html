{% extends "base.html" %}
{% block styles %}
<style>
    .report-container {
        margin-top: 30px;
        margin-left: auto;
        margin-right: auto;
        background-color: #ffffff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        max-width: 900px;
    }

    .report-title {
        font-size: 1.6em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 10px;
    }

    .report-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    .report-table th,
    .report-table td {
        padding: 8px 12px;
        border-bottom: 1px solid #ddd;
        text-align: right;
    }

    .report-table th {
        background-color: #f8f9fa;
        color: #495057;
        text-align: center;
    }

    .report-table td:first-child,
    .report-table th:first-child {
        text-align: left;
    }

    .report-note {
        font-size: 0.85em;
        color: Red;
        font-style: italic;
    }

    .form-select {
        display: inline-block;
        margin-right: 10px;
    }

    .mb-4 {
        margin-bottom: 1.5rem;
    }

    .mb-5 {
        margin-bottom: 2.5rem;
    }

    .d-flex {
        display: flex;
    }

    .justify-content-end {
        justify-content: flex-end;
    }

    .align-items-center {
        align-items: center;
    }

    .me-2 {
        margin-right: 0.5rem;
    }

    .me-3 {
        margin-right: 1rem;
    }
</style>
{% endblock %}

{% block content %}

<!-- Period Selector -->
<form method="GET" class="mb-4 d-flex justify-content-end align-items-center">
    <label for="report_date" class="me-2">As of:</label>
    <input type="date" name="report_date" value="{{ report_date }}" onchange="this.form.submit();">
</form>

<div class="report-container">
    <!-- Trial Balance -->
    <p class="report-title">Trial Balance <small class="text-muted">(As of {{ report_date }})</small></p>
    <table class="report-table table-striped">
        <thead>
            <tr>
                <th>Account</th>
                <th>Month to Date</th>
                <th>Year to Date</th>
                <th>Last Year</th>
            </tr>
        </thead>
        <tbody>
            {% for account_title, values in summary.items() %}
            <tr>
                <td>{{ account_title }}</td>
                <td>{{ "({:,.2f})".format(values["MTD"]*-1) if values["MTD"] < 0 else "{:,.2f}".format(values["MTD"]) }}</td>
                <td>{{ "({:,.2f})".format(values["Total"]*-1) if values["Total"] < 0 else "{:,.2f}".format(values["Total"]) }}</td>
                <td>{{ "({:,.2f})".format(values["Last Year End"]*-1) if values["Last Year End"] < 0 else "{:,.2f}".format(values["Last Year End"]) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
